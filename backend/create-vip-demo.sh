#!/bin/bash

echo "ðŸŽ¯ Creating KCT VIP Demo Customer"
echo "=================================="
echo ""

BASE_URL="https://backend-production-7441.up.railway.app"

echo "Creating fully populated demo customer..."
echo ""

RESPONSE=$(curl -s -X POST "$BASE_URL/admin/demo-customer" \
  -H "Content-Type: application/json")

if echo "$RESPONSE" | jq -e '.success' >/dev/null 2>&1; then
    echo "âœ… SUCCESS! Demo customer created"
    echo ""
    CUSTOMER_ID=$(echo "$RESPONSE" | jq -r '.customer.id')
    echo "ðŸ“§ Email: john.smith.vip@kctmenswear.com"
    echo "ðŸ†” Customer ID: $CUSTOMER_ID"
    echo ""
    echo "=================================="
    echo "ðŸ“Š CUSTOMER PROFILE INCLUDES:"
    echo "=================================="
    echo ""
    echo "ðŸ’° ANALYTICS:"
    echo "  â€¢ Lifetime Value: $15,750"
    echo "  â€¢ Average Order: $525"
    echo "  â€¢ Total Orders: 30"
    echo "  â€¢ Risk Score: Low"
    echo ""
    echo "ðŸ† LOYALTY:"
    echo "  â€¢ Tier: Platinum"
    echo "  â€¢ Points: 15,750"
    echo "  â€¢ Benefits: 20% discount, Free alterations"
    echo ""
    echo "ðŸ’’ WEDDING EVENT:"
    echo "  â€¢ Date: June 15, 2025"
    echo "  â€¢ Role: Groom"
    echo "  â€¢ Party Size: 8 groomsmen"
    echo "  â€¢ Rental Value: $4,200"
    echo ""
    echo "ðŸ‘” MEASUREMENTS:"
    echo "  â€¢ Suit: 42R"
    echo "  â€¢ Shirt: 16.5/34"
    echo "  â€¢ Shoe: 10.5"
    echo ""
    echo "ðŸ“ INTERNAL NOTES:"
    echo "  â€¢ VIP - Premium service required"
    echo "  â€¢ Wedding party rental in progress"
    echo "  â€¢ Prefers morning appointments"
    echo "  â€¢ Allergic to wool"
    echo ""
    echo "ðŸ·ï¸ SEGMENTS:"
    echo "  â€¢ VIP Customer"
    echo "  â€¢ Frequent Buyer"
    echo "  â€¢ Wedding Party"
    echo "  â€¢ Platinum Tier"
    echo ""
    echo "=================================="
    echo "ðŸ” HOW TO VIEW:"
    echo "=================================="
    echo ""
    echo "1. In Admin Panel:"
    echo "   Go to Customers â†’ Search for 'john.smith.vip@kctmenswear.com'"
    echo "   (Shows basic info)"
    echo ""
    echo "2. Via Enhanced API:"
    echo "   GET $BASE_URL/admin/customers-enhanced/$CUSTOMER_ID?include_analytics=true"
    echo "   (Returns ALL enhanced data)"
    echo ""
    echo "3. Test the API:"
    echo "   curl '$BASE_URL/admin/customers-enhanced/$CUSTOMER_ID?include_analytics=true'"
    echo ""
else
    echo "â„¹ï¸ Note: Demo customer may already exist or requires authentication"
    echo "$RESPONSE" | jq '.' 2>/dev/null || echo "$RESPONSE"
fi